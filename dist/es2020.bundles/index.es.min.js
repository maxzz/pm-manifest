var t;!function(t){var e;(e=t.FORMNAME||(t.FORMNAME={}))[e.noname=-1]="noname",e[e.signon=0]="signon",e[e.pchange=1]="pchange",e[e.fieldcatalog=-2]="fieldcatalog"}(t||(t={}));const e=["Ask - Resuse","Ask - Confirm","Ask Always "],n={txt:{name:{i:0,f:"Windows User Name",s:"User Name"},upnname:{i:1,f:"Windows User Principal Name",s:"User Principal Name"},fullname:{i:2,f:"Windows Domain\\User Name",s:"Domain\\User Name"},domain:{i:3,f:"Windows Domain",s:"Windows Domain"},"e-mail":{i:4,f:"Windows E-mail Address",s:"Windows Email"}},psw:{password:{i:0,f:"Windows User Password",s:"Windows Password"}}};var i,s,o,r,a;function c(t){let e=i[t.type]||i.und;return e===i.edit&&t.password?i.psw:e}function l(t){return t&&t.detection&&t.detection.names_ext?t.detection.names_ext.split(":"):[]}function u(t,e){if(!e)return"";let n=""!==e?parseInt(`0x${e}`,16):-1;return n<t.length&&n>=0?o.removeEscapeChars(t[n],"\\"):"????????????"}!function(t){t[t.und=0]="und",t[t.edit=1]="edit",t[t.button=2]="button",t[t.list=3]="list",t[t.combo=4]="combo",t[t.check=5]="check",t[t.radio=6]="radio",t[t.text=7]="text",t[t.psw=8]="psw"}(i||(i={})),function(t){function e({askalways:t,onetvalue:e,value:n,password:i,fType:s}){const o={valueAs:e||t?!e&&t?1:2:0,...i&&{isPsw:!0},fType:s};return n&&(o.isRef="@"===n?.charAt(0),o.value=n?.replace(/^@/,""),o.isRef=o.isRef&&!!o.value&&"@"!==o.value.charAt(0)),o}function n(t,e){const{valueAs:n}=t;0===n?(e.onetvalue=void 0,e.askalways=void 0):1===n?(e.onetvalue=void 0,e.askalways=!0):(e.onetvalue=!0,e.askalways=!0),t.value?e.value=`${t.isRef||"@"===t.value.charAt(0)?"@":""}${t.value}`:delete e.value}t.valueLife4ManiLogic=e,t.valueLife4Mani=function(t){const{askalways:n,onetvalue:i,value:s,password:o}=t;return e({askalways:n,onetvalue:i,value:s,password:o,fType:c(t)})},t.valueLife4Catalog=function(t){const{askalways:n,onetvalue:s,value:o,password:r}=t;return e({askalways:n,onetvalue:s,value:o,password:r,fType:t.password?i.psw:i.edit})},t.valueLife2ManiLogic=n,t.valueLife2Mani=function(t,e){n(t,e)}}(s||(s={})),function(t){function e(t){return Object.fromEntries(Object.entries(t).map((([t,e])=>[e,t])))}t.removeEscapeChars=function(t,e){return t};const n={"^up;":"^","^at;":"@","^dot;":".","^2dot;":":","^escape;":"","%0d":"\r","%0a":"\n"},i=e(n),s=/(\^up;|\^at;|\^dot;|\^2dot;|\^escape;|%0d|%0a)/g,o=/[\^@\.:\x1b\r\n]/g;t.cppRestore=function(t){return t?t.replace(s,(t=>n[t])):""},t.cppEscape=function(t){return t?t.replace(o,(t=>i[t])):""},t.colonEscape=function(t){return t?t.replace(/:/g,"^2dot;"):""};const r={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'","%0d":"\r","%0a":"\n"},a=e(r),c=/(&lt;|&gt;|&amp;|&quot;|&apos;|%0d|%0a)/g,l=/[<>&"'\r\n]/g;t.xmlRestore=function(t){return t?t.replace(c,(t=>r[t])):""},t.xmlEscape=function(t){return t?t.replace(l,(t=>a[t])):""},t.persentRemove=function(t){try{return decodeURI(t)}catch(e){return t}}}(o||(o={})),function(t){t.dpTimeToShow=function(t){if(t){const e=function(t){return"string"==typeof t&&(t=t?Number("0x"+t.split(" ").join("")):0),t?new Date(t/1e4-116444736e5):new Date}(t).toLocaleString(),n=/^(\d\d??)\/(\d\d??)\/(\d\d\d\d), (\d\d??):(\d\d??):(\d\d?)([\s\S]*$)/.exec(e);return n&&[1,2,4,5,6].forEach((t=>{return n[t]=(e=(e=n[t])?""+e:"").length<(i=2)?"0000000000".slice(0,i-e.length)+e:e;var e,i})),n?`${n[1]}.${n[2]}.${n[3]} ${n[4]}:${n[5]}:${n[6]} ${n[7]}`:e}return""}}(r||(r={})),function(t){let e;!function(t){function e(t){let[e,n,i,s]=t.split(" ").map((t=>+t));return{x:e,y:n,w:i-e,h:s-n}}function n(t){return`${t.x} ${t.y} ${t.x+t.w} ${t.y+t.h}`}t.unPool=function(t,e){return e.split("|").map((e=>u(t,e)))},function(t){function i(t){let e=Number.MAX_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,i=0,s=0;return t.forEach((({x:t,y:o,w:r,h:a})=>{e>t&&(e=t),n>o&&(n=o),i<t+r&&(i=t+r),s<o+a&&(s=o+a)})),{x1:e,y1:n,x2:i,y2:s}}t.rectsBoundaries=i,t.buildPreviewData=function(t){let s=new Set;t.forEach((t=>{const e=(t.path.loc||"").split("|");e.forEach((t=>s.add(t))),t.ridx=e[e.length-1]}));let o=Array.from(s).map(e).filter((t=>t.w||t.h)),r=i(o);const a=o.map(n);return t.forEach((t=>{t.ridx=a.findIndex((e=>e===t.ridx)),o[t.ridx]&&(o[t.ridx].f=1)})),{rects:o,bounds:r}}}(t.utils||(t.utils={}))}(e=t.loc||(t.loc={})),t.fieldPathItems=function(t,n){const i={};return function(t){return t.split("[").filter(Boolean).map((t=>t.split("]")))}(n).forEach((([n,s])=>{switch(n){case"p4a":case"p4":i.p4a=s.split("|").map((e=>function(t,e){let n=e.split(".");return{rnumber:0,roleString:u(t,n[1]),className:o.cppRestore(u(t,n[2])),name:o.cppRestore(u(t,n[3]))}}(t,e)));break;case"loc":i.loc=e.unPool(t,s).join("|");break;case"sid":i.sid=function(t,e){let n={};return e.split(".").forEach(((e,i)=>{let s=o.cppRestore(u(t,e));switch(i){case 0:n.version=s;break;case 1:n.generatedId=s;break;case 2:n.formName=s;break;case 3:n.formAttrs=s;break;case 4:n.outerHtml=s;break;default:n[i]=s}})),n}(t,s);break;case"did2":i.did2=s;break;case"sn":{i.sn={total:0,current:0,parts:[]};let t=s.split(";");if(t.length){let e=t[0].split(".");e.length>2&&(i.sn.total=+e[0],i.sn.current=+e[1],t[0]=e[2]),i.sn.parts=t.filter(Boolean)}break}default:console.log("??????path??????")}})),i}}(a||(a={}));var d={},h={};!function(t){const e=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n="["+e+"]["+(e+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040")+"]*",i=new RegExp("^"+n+"$");t.isExist=function(t){return void 0!==t},t.isEmptyObject=function(t){return 0===Object.keys(t).length},t.merge=function(t,e,n){if(e){const i=Object.keys(e),s=i.length;for(let o=0;o<s;o++)t[i[o]]="strict"===n?[e[i[o]]]:e[i[o]]}},t.getValue=function(e){return t.isExist(e)?e:""},t.isName=function(t){const e=i.exec(t);return!(null==e)},t.getAllMatches=function(t,e){const n=[];let i=e.exec(t);for(;i;){const s=[];s.startIndex=e.lastIndex-i[0].length;const o=i.length;for(let t=0;t<o;t++)s.push(i[t]);n.push(s),i=e.exec(t)}return n},t.nameRegexp=n}(h);const p=h,f={allowBooleanAttributes:!1,unpairedTags:[]};function m(t){return" "===t||"\t"===t||"\n"===t||"\r"===t}function g(t,e){const n=e;for(;e<t.length;e++)if("?"!=t[e]&&" "!=t[e]);else{const i=t.substr(n,e-n);if(e>5&&"xml"===i)return A("InvalidXml","XML declaration allowed only at the start of the document.",$(t,e));if("?"==t[e]&&">"==t[e+1]){e++;break}}return e}function x(t,e){if(t.length>e+5&&"-"===t[e+1]&&"-"===t[e+2]){for(e+=3;e<t.length;e++)if("-"===t[e]&&"-"===t[e+1]&&">"===t[e+2]){e+=2;break}}else if(t.length>e+8&&"D"===t[e+1]&&"O"===t[e+2]&&"C"===t[e+3]&&"T"===t[e+4]&&"Y"===t[e+5]&&"P"===t[e+6]&&"E"===t[e+7]){let n=1;for(e+=8;e<t.length;e++)if("<"===t[e])n++;else if(">"===t[e]&&(n--,0===n))break}else if(t.length>e+9&&"["===t[e+1]&&"C"===t[e+2]&&"D"===t[e+3]&&"A"===t[e+4]&&"T"===t[e+5]&&"A"===t[e+6]&&"["===t[e+7])for(e+=8;e<t.length;e++)if("]"===t[e]&&"]"===t[e+1]&&">"===t[e+2]){e+=2;break}return e}d.validate=function(t,e){e=Object.assign({},f,e);const n=[];let i=!1,s=!1;"\ufeff"===t[0]&&(t=t.substr(1));for(let r=0;r<t.length;r++)if("<"===t[r]&&"?"===t[r+1]){if(r+=2,r=g(t,r),r.err)return r}else{if("<"!==t[r]){if(m(t[r]))continue;return A("InvalidChar","char '"+t[r]+"' is not expected.",$(t,r))}{let a=r;if(r++,"!"===t[r]){r=x(t,r);continue}{let c=!1;"/"===t[r]&&(c=!0,r++);let l="";for(;r<t.length&&">"!==t[r]&&" "!==t[r]&&"\t"!==t[r]&&"\n"!==t[r]&&"\r"!==t[r];r++)l+=t[r];if(l=l.trim(),"/"===l[l.length-1]&&(l=l.substring(0,l.length-1),r--),o=l,!p.isName(o)){let e;return e=0===l.trim().length?"Invalid space after '<'.":"Tag '"+l+"' is an invalid name.",A("InvalidTag",e,$(t,r))}const u=v(t,r);if(!1===u)return A("InvalidAttr","Attributes for '"+l+"' have open quote.",$(t,r));let d=u.value;if(r=u.index,"/"===d[d.length-1]){const n=r-d.length;d=d.substring(0,d.length-1);const s=y(d,e);if(!0!==s)return A(s.err.code,s.err.msg,$(t,n+s.err.line));i=!0}else if(c){if(!u.tagClosed)return A("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",$(t,r));if(d.trim().length>0)return A("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",$(t,a));{const e=n.pop();if(l!==e.tagName){let n=$(t,e.tagStartPos);return A("InvalidTag","Expected closing tag '"+e.tagName+"' (opened in line "+n.line+", col "+n.col+") instead of closing tag '"+l+"'.",$(t,a))}0==n.length&&(s=!0)}}else{const o=y(d,e);if(!0!==o)return A(o.err.code,o.err.msg,$(t,r-d.length+o.err.line));if(!0===s)return A("InvalidXml","Multiple possible root nodes found.",$(t,r));-1!==e.unpairedTags.indexOf(l)||n.push({tagName:l,tagStartPos:a}),i=!0}for(r++;r<t.length;r++)if("<"===t[r]){if("!"===t[r+1]){r++,r=x(t,r);continue}if("?"!==t[r+1])break;if(r=g(t,++r),r.err)return r}else if("&"===t[r]){const e=w(t,r);if(-1==e)return A("InvalidChar","char '&' is not expected.",$(t,r));r=e}else if(!0===s&&!m(t[r]))return A("InvalidXml","Extra text at the end",$(t,r));"<"===t[r]&&r--}}}var o;return i?1==n.length?A("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",$(t,n[0].tagStartPos)):!(n.length>0)||A("InvalidXml","Invalid '"+JSON.stringify(n.map((t=>t.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):A("InvalidXml","Start tag expected.",1)};const b='"',N="'";function v(t,e){let n="",i="",s=!1;for(;e<t.length;e++){if(t[e]===b||t[e]===N)""===i?i=t[e]:i!==t[e]||(i="");else if(">"===t[e]&&""===i){s=!0;break}n+=t[e]}return""===i&&{value:n,index:e,tagClosed:s}}const E=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function y(t,e){const n=p.getAllMatches(t,E),i={};for(let t=0;t<n.length;t++){if(0===n[t][1].length)return A("InvalidAttr","Attribute '"+n[t][2]+"' has no space in starting.",P(n[t]));if(void 0!==n[t][3]&&void 0===n[t][4])return A("InvalidAttr","Attribute '"+n[t][2]+"' is without value.",P(n[t]));if(void 0===n[t][3]&&!e.allowBooleanAttributes)return A("InvalidAttr","boolean attribute '"+n[t][2]+"' is not allowed.",P(n[t]));const s=n[t][2];if(!T(s))return A("InvalidAttr","Attribute '"+s+"' is an invalid name.",P(n[t]));if(i.hasOwnProperty(s))return A("InvalidAttr","Attribute '"+s+"' is repeated.",P(n[t]));i[s]=1}return!0}function w(t,e){if(";"===t[++e])return-1;if("#"===t[e])return function(t,e){let n=/\d/;for("x"===t[e]&&(e++,n=/[\da-fA-F]/);e<t.length;e++){if(";"===t[e])return e;if(!t[e].match(n))break}return-1}(t,++e);let n=0;for(;e<t.length;e++,n++)if(!(t[e].match(/\w/)&&n<20)){if(";"===t[e])break;return-1}return e}function A(t,e,n){return{err:{code:t,msg:e,line:n.line||n,col:n.col}}}function T(t){return p.isName(t)}function $(t,e){const n=t.substring(0,e).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function P(t){return t.startIndex+t[1].length}var C={};const k={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,n){return t}};C.buildOptions=function(t){return Object.assign({},k,t)},C.defaultOptions=k;var O=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,e){"__proto__"===t&&(t="#__proto__"),this.child.push({[t]:e})}addChild(t){"__proto__"===t.tagname&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}};const I=h;function j(t,e){let n="";for(;e<t.length&&"'"!==t[e]&&'"'!==t[e];e++)n+=t[e];if(n=n.trim(),-1!==n.indexOf(" "))throw new Error("External entites are not supported");const i=t[e++];let s="";for(;e<t.length&&t[e]!==i;e++)s+=t[e];return[n,s,e]}function D(t,e){return"!"===t[e+1]&&"-"===t[e+2]&&"-"===t[e+3]}function S(t,e){return"!"===t[e+1]&&"E"===t[e+2]&&"N"===t[e+3]&&"T"===t[e+4]&&"I"===t[e+5]&&"T"===t[e+6]&&"Y"===t[e+7]}function _(t,e){return"!"===t[e+1]&&"E"===t[e+2]&&"L"===t[e+3]&&"E"===t[e+4]&&"M"===t[e+5]&&"E"===t[e+6]&&"N"===t[e+7]&&"T"===t[e+8]}function V(t,e){return"!"===t[e+1]&&"A"===t[e+2]&&"T"===t[e+3]&&"T"===t[e+4]&&"L"===t[e+5]&&"I"===t[e+6]&&"S"===t[e+7]&&"T"===t[e+8]}function L(t,e){return"!"===t[e+1]&&"N"===t[e+2]&&"O"===t[e+3]&&"T"===t[e+4]&&"A"===t[e+5]&&"T"===t[e+6]&&"I"===t[e+7]&&"O"===t[e+8]&&"N"===t[e+9]}function M(t){if(I.isName(t))return t;throw new Error(`Invalid entity name ${t}`)}var R=function(t,e){const n={};if("O"!==t[e+3]||"C"!==t[e+4]||"T"!==t[e+5]||"Y"!==t[e+6]||"P"!==t[e+7]||"E"!==t[e+8])throw new Error("Invalid Tag instead of DOCTYPE");{e+=9;let i=1,s=!1,o=!1,r="";for(;e<t.length;e++)if("<"!==t[e]||o)if(">"===t[e]){if(o?"-"===t[e-1]&&"-"===t[e-2]&&(o=!1,i--):i--,0===i)break}else"["===t[e]?s=!0:r+=t[e];else{if(s&&S(t,e))e+=7,[entityName,val,e]=j(t,e+1),-1===val.indexOf("&")&&(n[M(entityName)]={regx:RegExp(`&${entityName};`,"g"),val:val});else if(s&&_(t,e))e+=8;else if(s&&V(t,e))e+=8;else if(s&&L(t,e))e+=9;else{if(!D)throw new Error("Invalid DOCTYPE");o=!0}i++,r=""}if(0!==i)throw new Error("Unclosed DOCTYPE")}return{entities:n,i:e}};const F=/^[-+]?0x[a-fA-F0-9]+$/,B=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const G={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};const W=h,U=O,z=R,X=function(t,e={}){if(e=Object.assign({},G,e),!t||"string"!=typeof t)return t;let n=t.trim();if(void 0!==e.skipLike&&e.skipLike.test(n))return t;if(e.hex&&F.test(n))return Number.parseInt(n,16);{const i=B.exec(n);if(i){const s=i[1],o=i[2];let r=function(t){if(t&&-1!==t.indexOf("."))return"."===(t=t.replace(/0+$/,""))?t="0":"."===t[0]?t="0"+t:"."===t[t.length-1]&&(t=t.substr(0,t.length-1)),t;return t}(i[3]);const a=i[4]||i[6];if(!e.leadingZeros&&o.length>0&&s&&"."!==n[2])return t;if(!e.leadingZeros&&o.length>0&&!s&&"."!==n[1])return t;{const i=Number(n),c=""+i;return-1!==c.search(/[eE]/)||a?e.eNotation?i:t:-1!==n.indexOf(".")?"0"===c&&""===r||c===r||s&&c==="-"+r?i:t:o?r===c||s+r===c?i:t:n===c||n===s+c?i:t}}return t}};"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,W.nameRegexp);function q(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const i=e[n];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:t[i]}}}function Y(t,e,n,i,s,o,r){if(void 0!==t&&(this.options.trimValues&&!i&&(t=t.trim()),t.length>0)){r||(t=this.replaceEntitiesValue(t));const i=this.options.tagValueProcessor(e,t,n,s,o);if(null==i)return t;if(typeof i!=typeof t||i!==t)return i;if(this.options.trimValues)return rt(t,this.options.parseTagValue,this.options.numberParseOptions);return t.trim()===t?rt(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function Z(t){if(this.options.removeNSPrefix){const e=t.split(":"),n="/"===t.charAt(0)?"/":"";if("xmlns"===e[0])return"";2===e.length&&(t=n+e[1])}return t}const H=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function J(t,e,n){if(!this.options.ignoreAttributes&&"string"==typeof t){const n=W.getAllMatches(t,H),i=n.length,s={};for(let t=0;t<i;t++){const i=this.resolveNameSpace(n[t][1]);let o=n[t][4],r=this.options.attributeNamePrefix+i;if(i.length)if(this.options.transformAttributeName&&(r=this.options.transformAttributeName(r)),"__proto__"===r&&(r="#__proto__"),void 0!==o){this.options.trimValues&&(o=o.trim()),o=this.replaceEntitiesValue(o);const t=this.options.attributeValueProcessor(i,o,e);s[r]=null==t?o:typeof t!=typeof o||t!==o?t:rt(o,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[r]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){const t={};return t[this.options.attributesGroupName]=s,t}return s}}const K=function(t){t=t.replace(/\r\n?/g,"\n");const e=new U("!xml");let n=e,i="",s="";for(let o=0;o<t.length;o++){if("<"===t[o])if("/"===t[o+1]){const e=it(t,">",o,"Closing Tag is not closed.");let r=t.substring(o+2,e).trim();if(this.options.removeNSPrefix){const t=r.indexOf(":");-1!==t&&(r=r.substr(t+1))}this.options.transformTagName&&(r=this.options.transformTagName(r)),n&&(i=this.saveTextToParentTag(i,n,s));const a=s.substring(s.lastIndexOf(".")+1);if(r&&-1!==this.options.unpairedTags.indexOf(r))throw new Error(`Unpaired tag can not be used as closing tag: </${r}>`);let c=0;a&&-1!==this.options.unpairedTags.indexOf(a)?(c=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):c=s.lastIndexOf("."),s=s.substring(0,c),n=this.tagsNodeStack.pop(),i="",o=e}else if("?"===t[o+1]){let e=st(t,o,!1,"?>");if(!e)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,n,s),this.options.ignoreDeclaration&&"?xml"===e.tagName||this.options.ignorePiTags);else{const t=new U(e.tagName);t.add(this.options.textNodeName,""),e.tagName!==e.tagExp&&e.attrExpPresent&&(t[":@"]=this.buildAttributesMap(e.tagExp,s,e.tagName)),this.addChild(n,t,s)}o=e.closeIndex+1}else if("!--"===t.substr(o+1,3)){const e=it(t,"--\x3e",o+4,"Comment is not closed.");if(this.options.commentPropName){const r=t.substring(o+4,e-2);i=this.saveTextToParentTag(i,n,s),n.add(this.options.commentPropName,[{[this.options.textNodeName]:r}])}o=e}else if("!D"===t.substr(o+1,2)){const e=z(t,o);this.docTypeEntities=e.entities,o=e.i}else if("!["===t.substr(o+1,2)){const e=it(t,"]]>",o,"CDATA is not closed.")-2,r=t.substring(o+9,e);if(i=this.saveTextToParentTag(i,n,s),this.options.cdataPropName)n.add(this.options.cdataPropName,[{[this.options.textNodeName]:r}]);else{let t=this.parseTextData(r,n.tagname,s,!0,!1,!0);null==t&&(t=""),n.add(this.options.textNodeName,t)}o=e+2}else{let r=st(t,o,this.options.removeNSPrefix),a=r.tagName,c=r.tagExp,l=r.attrExpPresent,u=r.closeIndex;this.options.transformTagName&&(a=this.options.transformTagName(a)),n&&i&&"!xml"!==n.tagname&&(i=this.saveTextToParentTag(i,n,s,!1));const d=n;if(d&&-1!==this.options.unpairedTags.indexOf(d.tagname)&&(n=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),a!==e.tagname&&(s+=s?"."+a:a),this.isItStopNode(this.options.stopNodes,s,a)){let e="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)o=r.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(a))o=r.closeIndex;else{const n=this.readStopNodeData(t,a,u+1);if(!n)throw new Error(`Unexpected end of ${a}`);o=n.i,e=n.tagContent}const i=new U(a);a!==c&&l&&(i[":@"]=this.buildAttributesMap(c,s,a)),e&&(e=this.parseTextData(e,a,s,!0,l,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),i.add(this.options.textNodeName,e),this.addChild(n,i,s)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){"/"===a[a.length-1]?(a=a.substr(0,a.length-1),c=a):c=c.substr(0,c.length-1),this.options.transformTagName&&(a=this.options.transformTagName(a));const t=new U(a);a!==c&&l&&(t[":@"]=this.buildAttributesMap(c,s,a)),this.addChild(n,t,s),s=s.substr(0,s.lastIndexOf("."))}else{const t=new U(a);this.tagsNodeStack.push(n),a!==c&&l&&(t[":@"]=this.buildAttributesMap(c,s,a)),this.addChild(n,t,s),n=t}i="",o=u}}else i+=t[o]}return e.child};function Q(t,e,n){const i=this.options.updateTag(e.tagname,n,e[":@"]);!1===i||("string"==typeof i?(e.tagname=i,t.addChild(e)):t.addChild(e))}const tt=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){const n=this.docTypeEntities[e];t=t.replace(n.regx,n.val)}for(let e in this.lastEntities){const n=this.lastEntities[e];t=t.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const n=this.htmlEntities[e];t=t.replace(n.regex,n.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function et(t,e,n,i){return t&&(void 0===i&&(i=0===Object.keys(e.child).length),void 0!==(t=this.parseTextData(t,e.tagname,n,!1,!!e[":@"]&&0!==Object.keys(e[":@"]).length,i))&&""!==t&&e.add(this.options.textNodeName,t),t=""),t}function nt(t,e,n){const i="*."+n;for(const n in t){const s=t[n];if(i===s||e===s)return!0}return!1}function it(t,e,n,i){const s=t.indexOf(e,n);if(-1===s)throw new Error(i);return s+e.length-1}function st(t,e,n,i=">"){const s=function(t,e,n=">"){let i,s="";for(let o=e;o<t.length;o++){let e=t[o];if(i)e===i&&(i="");else if('"'===e||"'"===e)i=e;else if(e===n[0]){if(!n[1])return{data:s,index:o};if(t[o+1]===n[1])return{data:s,index:o}}else"\t"===e&&(e=" ");s+=e}}(t,e+1,i);if(!s)return;let o=s.data;const r=s.index,a=o.search(/\s/);let c=o,l=!0;if(-1!==a&&(c=o.substr(0,a).replace(/\s\s*$/,""),o=o.substr(a+1)),n){const t=c.indexOf(":");-1!==t&&(c=c.substr(t+1),l=c!==s.data.substr(t+1))}return{tagName:c,tagExp:o,closeIndex:r,attrExpPresent:l}}function ot(t,e,n){const i=n;let s=1;for(;n<t.length;n++)if("<"===t[n])if("/"===t[n+1]){const o=it(t,">",n,`${e} is not closed`);if(t.substring(n+2,o).trim()===e&&(s--,0===s))return{tagContent:t.substring(i,n),i:o};n=o}else if("?"===t[n+1]){n=it(t,"?>",n+1,"StopNode is not closed.")}else if("!--"===t.substr(n+1,3)){n=it(t,"--\x3e",n+3,"StopNode is not closed.")}else if("!["===t.substr(n+1,2)){n=it(t,"]]>",n,"StopNode is not closed.")-2}else{const i=st(t,n,">");if(i){(i&&i.tagName)===e&&"/"!==i.tagExp[i.tagExp.length-1]&&s++,n=i.closeIndex}}}function rt(t,e,n){if(e&&"string"==typeof t){const e=t.trim();return"true"===e||"false"!==e&&X(t,n)}return W.isExist(t)?t:""}var at=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"Â¢"},pound:{regex:/&(pound|#163);/g,val:"Â£"},yen:{regex:/&(yen|#165);/g,val:"Â¥"},euro:{regex:/&(euro|#8364);/g,val:"â‚¬"},copyright:{regex:/&(copy|#169);/g,val:"Â©"},reg:{regex:/&(reg|#174);/g,val:"Â®"},inr:{regex:/&(inr|#8377);/g,val:"â‚¹"}},this.addExternalEntities=q,this.parseXml=K,this.parseTextData=Y,this.resolveNameSpace=Z,this.buildAttributesMap=J,this.isItStopNode=nt,this.replaceEntitiesValue=tt,this.readStopNodeData=ot,this.saveTextToParentTag=et,this.addChild=Q}},ct={};function lt(t,e,n){let i;const s={};for(let o=0;o<t.length;o++){const r=t[o],a=ut(r);let c="";if(c=void 0===n?a:n+"."+a,a===e.textNodeName)void 0===i?i=r[a]:i+=""+r[a];else{if(void 0===a)continue;if(r[a]){let t=lt(r[a],e,c);const n=ht(t,e);r[":@"]?dt(t,r[":@"],c,e):1!==Object.keys(t).length||void 0===t[e.textNodeName]||e.alwaysCreateTextNode?0===Object.keys(t).length&&(e.alwaysCreateTextNode?t[e.textNodeName]="":t=""):t=t[e.textNodeName],void 0!==s[a]&&s.hasOwnProperty(a)?(Array.isArray(s[a])||(s[a]=[s[a]]),s[a].push(t)):e.isArray(a,c,n)?s[a]=[t]:s[a]=t}}}return"string"==typeof i?i.length>0&&(s[e.textNodeName]=i):void 0!==i&&(s[e.textNodeName]=i),s}function ut(t){const e=Object.keys(t);for(let t=0;t<e.length;t++){const n=e[t];if(":@"!==n)return n}}function dt(t,e,n,i){if(e){const s=Object.keys(e),o=s.length;for(let r=0;r<o;r++){const o=s[r];i.isArray(o,n+"."+o,!0,!0)?t[o]=[e[o]]:t[o]=e[o]}}}function ht(t,e){const{textNodeName:n}=e,i=Object.keys(t).length;return 0===i||!(1!==i||!t[n]&&"boolean"!=typeof t[n]&&0!==t[n])}ct.prettify=function(t,e){return lt(t,e)};const{buildOptions:pt}=C,ft=at,{prettify:mt}=ct,gt=d;var xt=class{constructor(t){this.externalEntities={},this.options=pt(t)}parse(t,e){if("string"==typeof t);else{if(!t.toString)throw new Error("XML data is accepted in String or Bytes[] form.");t=t.toString()}if(e){!0===e&&(e={});const n=gt.validate(t,e);if(!0!==n)throw Error(`${n.err.msg}:${n.err.line}:${n.err.col}`)}const n=new ft(this.options);n.addExternalEntities(this.externalEntities);const i=n.parseXml(t);return this.options.preserveOrder||void 0===i?i:mt(i,this.options)}addEntity(t,e){if(-1!==e.indexOf("&"))throw new Error("Entity value can't have '&'");if(-1!==t.indexOf("&")||-1!==t.indexOf(";"))throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if("&"===e)throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=e}};function bt(t,e,n,i){let s="",o=!1;for(let r=0;r<t.length;r++){const a=t[r],c=Nt(a);let l="";if(l=0===n.length?c:`${n}.${c}`,c===e.textNodeName){let t=a[c];Et(l,e)||(t=e.tagValueProcessor(c,t),t=yt(t,e)),o&&(s+=i),s+=t,o=!1;continue}if(c===e.cdataPropName){o&&(s+=i),s+=`<![CDATA[${a[c][0][e.textNodeName]}]]>`,o=!1;continue}if(c===e.commentPropName){s+=i+`\x3c!--${a[c][0][e.textNodeName]}--\x3e`,o=!0;continue}if("?"===c[0]){const t=vt(a[":@"],e),n="?xml"===c?"":i;let r=a[c][0][e.textNodeName];r=0!==r.length?" "+r:"",s+=n+`<${c}${r}${t}?>`,o=!0;continue}let u=i;""!==u&&(u+=e.indentBy);const d=i+`<${c}${vt(a[":@"],e)}`,h=bt(a[c],e,l,u);-1!==e.unpairedTags.indexOf(c)?e.suppressUnpairedNode?s+=d+">":s+=d+"/>":h&&0!==h.length||!e.suppressEmptyNode?h&&h.endsWith(">")?s+=d+`>${h}${i}</${c}>`:(s+=d+">",h&&""!==i&&(h.includes("/>")||h.includes("</"))?s+=i+e.indentBy+h+i:s+=h,s+=`</${c}>`):s+=d+"/>",o=!0}return s}function Nt(t){const e=Object.keys(t);for(let t=0;t<e.length;t++){const n=e[t];if(":@"!==n)return n}}function vt(t,e){let n="";if(t&&!e.ignoreAttributes)for(let i in t){let s=e.attributeValueProcessor(i,t[i]);s=yt(s,e),!0===s&&e.suppressBooleanAttributes?n+=` ${i.substr(e.attributeNamePrefix.length)}`:n+=` ${i.substr(e.attributeNamePrefix.length)}="${s}"`}return n}function Et(t,e){let n=(t=t.substr(0,t.length-e.textNodeName.length-1)).substr(t.lastIndexOf(".")+1);for(let i in e.stopNodes)if(e.stopNodes[i]===t||e.stopNodes[i]==="*."+n)return!0;return!1}function yt(t,e){if(t&&t.length>0&&e.processEntities)for(let n=0;n<e.entities.length;n++){const i=e.entities[n];t=t.replace(i.regex,i.val)}return t}const wt=function(t,e){let n="";return e.format&&e.indentBy.length>0&&(n="\n"),bt(t,e,"",n)},At={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Tt(t){this.options=Object.assign({},At,t),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Ct),this.processTextOrObjNode=$t,this.options.format?(this.indentate=Pt,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function $t(t,e,n){const i=this.j2x(t,n+1);return void 0!==t[this.options.textNodeName]&&1===Object.keys(t).length?this.buildTextValNode(t[this.options.textNodeName],e,i.attrStr,n):this.buildObjectNode(i.val,e,i.attrStr,n)}function Pt(t){return this.options.indentBy.repeat(t)}function Ct(t){return!!t.startsWith(this.options.attributeNamePrefix)&&t.substr(this.attrPrefixLen)}Tt.prototype.build=function(t){return this.options.preserveOrder?wt(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0).val)},Tt.prototype.j2x=function(t,e){let n="",i="";for(let s in t)if(void 0===t[s]);else if(null===t[s])"?"===s[0]?i+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+s+"/"+this.tagEndChar;else if(t[s]instanceof Date)i+=this.buildTextValNode(t[s],s,"",e);else if("object"!=typeof t[s]){const o=this.isAttribute(s);if(o)n+=this.buildAttrPairStr(o,""+t[s]);else if(s===this.options.textNodeName){let e=this.options.tagValueProcessor(s,""+t[s]);i+=this.replaceEntitiesValue(e)}else i+=this.buildTextValNode(t[s],s,"",e)}else if(Array.isArray(t[s])){const n=t[s].length;let o="";for(let r=0;r<n;r++){const n=t[s][r];void 0===n||(null===n?"?"===s[0]?i+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+s+"/"+this.tagEndChar:"object"==typeof n?this.options.oneListGroup?o+=this.j2x(n,e+1).val:o+=this.processTextOrObjNode(n,s,e):o+=this.buildTextValNode(n,s,"",e))}this.options.oneListGroup&&(o=this.buildObjectNode(o,s,"",e)),i+=o}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){const e=Object.keys(t[s]),i=e.length;for(let o=0;o<i;o++)n+=this.buildAttrPairStr(e[o],""+t[s][e[o]])}else i+=this.processTextOrObjNode(t[s],s,e);return{attrStr:n,val:i}},Tt.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&"true"===e?" "+t:" "+t+'="'+e+'"'},Tt.prototype.buildObjectNode=function(t,e,n,i){if(""===t)return"?"===e[0]?this.indentate(i)+"<"+e+n+"?"+this.tagEndChar:this.indentate(i)+"<"+e+n+this.closeTag(e)+this.tagEndChar;{let s="</"+e+this.tagEndChar,o="";return"?"===e[0]&&(o="?",s=""),n&&-1===t.indexOf("<")?this.indentate(i)+"<"+e+n+o+">"+t+s:!1!==this.options.commentPropName&&e===this.options.commentPropName&&0===o.length?this.indentate(i)+`\x3c!--${t}--\x3e`+this.newLine:this.indentate(i)+"<"+e+n+o+this.tagEndChar+t+this.indentate(i)+s}},Tt.prototype.closeTag=function(t){let e="";return-1!==this.options.unpairedTags.indexOf(t)?this.options.suppressUnpairedNode||(e="/"):e=this.options.suppressEmptyNode?"/":`></${t}`,e},Tt.prototype.buildTextValNode=function(t,e,n,i){if(!1!==this.options.cdataPropName&&e===this.options.cdataPropName)return this.indentate(i)+`<![CDATA[${t}]]>`+this.newLine;if(!1!==this.options.commentPropName&&e===this.options.commentPropName)return this.indentate(i)+`\x3c!--${t}--\x3e`+this.newLine;if("?"===e[0])return this.indentate(i)+"<"+e+n+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(e,t);return s=this.replaceEntitiesValue(s),""===s?this.indentate(i)+"<"+e+n+this.closeTag(e)+this.tagEndChar:this.indentate(i)+"<"+e+n+">"+s+"</"+e+this.tagEndChar}},Tt.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const n=this.options.entities[e];t=t.replace(n.regex,n.val)}return t};var kt={XMLParser:xt,XMLValidator:d,XMLBuilder:Tt};function Ot(t){return t.descriptor=t.descriptor?._attributes||{},t.forms=t.forms?.form||[],Array.isArray(t.forms)||(t.forms=[t.forms]),t.forms.forEach((t=>{if(t.fcontext&&(t.fcontext=t.fcontext._attributes),t.detection&&(t.detection=t.detection._attributes),t.options&&(t.options=t.options._attributes),t.fields){let e=t.fields.field;t.fields=Array.isArray(e)?e:[e]}t.fcontext&&void 0!==t.fcontext.name&&(t.fcontext.name=+t.fcontext.name),t.detection&&void 0!==t.detection.web_checkurl&&(t.detection.web_checkurl=!!t.detection.web_checkurl),t.fields&&(t.fields=t.fields.map((t=>t._attributes)),t.fields.forEach((t=>{t.password&&(t.password=!!t.password),t.submit&&(t.submit=!!t.submit),t.useit&&(t.useit=!!t.useit),t.rfieldindex&&(t.rfieldindex=+t.rfieldindex)})))})),t.options?.processes&&(t.options.processes=t.options.processes.process||[],Array.isArray(t.options.processes)||(t.options.processes=[t.options.processes]),t.options.processes=t.options.processes.map((t=>t._attributes))),t}function It(t){return t.names=t?.names?.name||[],t.names=t.names.map((t=>t?._attributes)).filter(Boolean),t}const jt={attributeNamePrefix:"",attributesGroupName:"_attributes",ignoreAttributes:!1,allowBooleanAttributes:!0};function Dt(t){const e=new kt.XMLParser(jt).parse(t);return{mani:e?.manifest&&Ot(e.manifest),fcat:e?.storagecatalog&&It(e?.storagecatalog)}}var St;function _t(t){console.log("%ctm-error:\n","color: red",t)}!function(t){let e,n;!function(t){t[t.undef=0]="undef",t[t.makeDomainMatch=1]="makeDomainMatch",t[t.regex=2]="regex",t[t.wildcard=3]="wildcard",t[t.skipDomainMatch=4]="skipDomainMatch"}(e=t.Style||(t.Style={})),function(t){t[t.undef=0]="undef",t[t.caseinsensitive=1]="caseinsensitive",t[t.matchtext=2]="matchtext",t[t.usequery=4]="usequery",t[t.pmacSet=8]="pmacSet"}(n=t.Options||(t.Options={})),t.reUrlMatchCheck=/^\[m0\]\:.\:.\:/,t.addPrefixRegex="[m0]:3:8:";const i=/^\[m0\]:([0-4]):([01248ace]{1,4}):\s*(.+)/;function s(t){let s={style:e.undef,opt:n.undef,url:t||""},r=t?.match(i);return r&&(s.style=+r[1],s.opt=+r[2],s.url=o.cppRestore(r[3])),s}t.getMatchRawData=s,t.makeRawMatchData=function({style:t,opt:i,url:s},r){return s=(t!==e.undef?s||"":r).trim(),t!==e.undef||i!==n.undef?`[m0]:${t}:${i}:${o.colonEscape(s)}`:s},t.getMatchInfo=function(t){const e=s(t);if(e.style||e.opt){const{style:t,opt:n,url:i}=e;let s=[];0!=(1&n)&&s.push("case insensitive"),0!=(2&n)&&s.push("match ext.");let o=function(t){return{1:"use domain match",2:"regex",3:"wildcard",4:"don't match this in domain"}[t]||`${t}`}(t);return{prefix:`[m0]:${t}:${n}`,join:`${o}${s.length?`; Options: ${s.join(", ")}`:""}`,url:i}}}}(St||(St={}));const Vt={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:"",cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(t){return""+t},attrValueProcessor:function(t){return""+t},doReduceEmptyValues:!1,doAttrsIndent:!0,doAttrsEndingIndent:!0},Lt=["attributeNamePrefix","attributesGroupName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor","rootNodeName","doReduceEmptyValues","doAttrsIndent","doAttrsEndingIndent"];class Mt{constructor(t){this.tagEndChar=">\n",this.newLine="\n",this.options=function(t,e,n){if(!t)return e;let i={};for(let s=0;s<n.length;s++){const o=n[s];i[o]=void 0!==t[o]?t[o]:e[o]}return i}(t||{},Vt,Lt),this.options.ignoreAttributes||this.options.attributesGroupName?(this.attrPrefixLen=0,this.isAttribute=()=>!1):(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Bt),this.isCDATA=this.options.cdataTagName?Gt:()=>!1,this.replaceCDATAstr=Rt,this.replaceCDATAarr=Ft,this.options.format?(this.indentate=Wt,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=()=>"",this.tagEndChar=">",this.newLine=""),this.textofTextValNode=this.options.supressEmptyNode?this._textofTextNode:this._textofTextValNodeWithoutEmptyCheck,this.textofObjectNode=this.options.supressEmptyNode?this._textofObjNode:this._textofObjectNodeWithoutEmptyCheck}parse(t){return Array.isArray(t)&&this.options.rootNodeName&&this.options.rootNodeName.length>1&&(t={[this.options.rootNodeName]:t}),this.j2x(t,0).val}j2x(t,e){let n=[],i="";for(let s in t){const o=t[s];if(void 0===o);else if(null===o)i+=`${this.indentate(e)}<${s}/${this.tagEndChar}`;else if(o instanceof Date)i+=this.textofTextValNode(o,s,[],e);else if("object"!=typeof o){const r=this.isAttribute(s);r?n.push(`${r}="${this.options.attrValueProcessor(o,r)}"`):this.isCDATA(s)?t[this.options.textNodeName]?i+=this.replaceCDATAstr(t[this.options.textNodeName],o):i+=this.replaceCDATAstr("",o):s===this.options.textNodeName?t[this.options.cdataTagName]||(i+=this.options.tagValueProcessor(o)):i+=this.textofTextValNode(o,s,[],e)}else if(Array.isArray(o))if(this.isCDATA(s))i+=this.indentate(e),t[this.options.textNodeName]?i+=this.replaceCDATAarr(t[this.options.textNodeName],o):i+=this.replaceCDATAarr("",o);else{const t=o.length;for(let n=0;n<t;n++){const t=o[n];void 0===t||(i+=null===t?`${this.indentate(e)}<${s}/${this.tagEndChar}`:"object"==typeof t?this.processTextOrObjNode(t,s,e):this.textofTextValNode(t,s,[],e))}}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){const t=Object.keys(o),e=t.length;for(let i=0;i<e;i++){const e=t[i];n.push(`${e}="${this.options.attrValueProcessor(o[e],e)}"`)}}else i+=this.processTextOrObjNode(o,s,e)}return{attrStr:n,val:i}}processTextOrObjNode(t,e,n){const i=this.j2x(t,n+1);return void 0!==t[this.options.textNodeName]&&1===Object.keys(t).length?this.textofTextValNode(i.val,e,i.attrStr,n):this.textofObjectNode(i.val,e,i.attrStr,n)}_textofObjectNodeWithoutEmptyCheck(t,e,n,i){const s=this.attrsToStr(n,i),o=this.options.doAttrsIndent&&!t,r=o?this.options.doAttrsEndingIndent?`${this.newLine}${this.indentate(i)}/${this.tagEndChar}`:` /${this.tagEndChar}`:"",a=this.options.doReduceEmptyValues&&!t;let c;return c=n.length&&-1===t.indexOf("<")?o?r:a?` /${this.tagEndChar}`:`>${t}</${e}${this.tagEndChar}`:o?r:a?` /${this.tagEndChar}`:`${this.tagEndChar}${t}${this.indentate(i)}</${e}${this.tagEndChar}`,`${this.indentate(i)}<${e}${s}${c}`}_textofTextValNodeWithoutEmptyCheck(t,e,n,i){const s=this.attrsToStr(n,i),o=this.options.doAttrsIndent&&!t,r=o?this.options.doAttrsEndingIndent?`${this.newLine}${this.indentate(i)}/${this.tagEndChar}`:` /${this.tagEndChar}`:"",a=this.options.tagValueProcessor(t),c=this.options.doReduceEmptyValues&&!a,l=o?r:c?` /${this.tagEndChar}`:`>${a}</${e}${this.tagEndChar}`;return`${this.indentate(i)}<${e}${s}${l}`}_textofObjNode(t,e,n,i){if(""!==t)return this._textofObjectNodeWithoutEmptyCheck(t,e,n,i);{const t=this.attrsToStr(n,i);return`${this.indentate(i)}<${e}${t}/${this.tagEndChar}`}}_textofTextNode(t,e,n,i){if(""!==t)return this._textofTextValNodeWithoutEmptyCheck(t,e,n,i);{const t=this.attrsToStr(n,i);return`${this.indentate(i)}<${e}${t}/${this.tagEndChar}`}}attrsToStr(t,e){const n=this.indentate(e+1);return t.map((t=>this.options.doAttrsIndent?`\n${n}${t}`:` ${t}`)).join("")}}function Rt(t,e){return t=this.options.tagValueProcessor(t),""===this.options.cdataPositionChar||""===t?`${t}<![CDATA[${e}]]${this.tagEndChar}`:t.replace(this.options.cdataPositionChar,`<![CDATA[${e}]]${this.tagEndChar}`)}function Ft(t,e){if(t=this.options.tagValueProcessor(t),""===this.options.cdataPositionChar||""===t)return`${t}<![CDATA[${e.join("]]><![CDATA[")}]]${this.tagEndChar}`;for(let n in e)t=t.replace(this.options.cdataPositionChar,`<![CDATA[${e[n]}]]>`);return t+this.newLine}function Bt(t){return!!t.startsWith(this.options.attributeNamePrefix)&&t.substr(this.attrPrefixLen)}function Gt(t){return t===this.options.cdataTagName}function Wt(t){return this.options.indentBy.repeat(t)}const Ut={...jt,format:!0,indentBy:"\t",attrValueProcessor:(t,e)=>"string"==typeof t?o.xmlEscape(t):"boolean"==typeof t?t?"1":"0":t},zt="_attributes";function Xt(t){return!!t&&!!Reflect.ownKeys(t).length}function qt(t){let e=t&&function(t){const{options:e,descriptor:n,forms:i,...s}=t;let o={manifest:{}};if(e){const{processes:t,...n}=e,i=t?.length&&{processes:{process:t.map((t=>({[zt]:t})))}};o.manifest.options={...i,...n}}return Xt(n)&&(o.manifest.descriptor={[zt]:n}),i?.length&&(o.manifest.forms={form:i.map((t=>{const{fcontext:e,detection:n,options:i,fields:s,...o}=t;return{...Xt(e)&&{fcontext:{[zt]:t.fcontext}},...Xt(n)&&{detection:{[zt]:t.detection}},...Xt(i)&&{options:{[zt]:t.options}},...s?.length&&{fields:{field:t.fields.map((t=>({[zt]:t})))}},...o}}))}),{...o,...s}}(t);if(e)try{const t=new Mt(Ut);return`<?xml version="1.0" encoding="UTF-8"?>\n${t.parse(e)}`}catch(t){_t(t)}}var Yt;!function(t){const e=new RegExp(/(.*?)\.?([^\.]*?)\.(gl|com|net|org|biz|ws|in|me|co\.uk|co|org\.uk|ltd\.uk|plc\.uk|me\.uk|edu|mil|br\.com|cn\.com|eu\.com|hu\.com|no\.com|qc\.com|sa\.com|se\.com|se\.net|us\.com|uy\.com|ac|co\.ac|gv\.ac|or\.ac|ac\.ac|af|am|as|at|ac\.at|co\.at|gv\.at|or\.at|asn\.au|com\.au|edu\.au|org\.au|net\.au|id\.au|be|ac\.be|adm\.br|adv\.br|am\.br|arq\.br|art\.br|bio\.br|cng\.br|cnt\.br|com\.br|ecn\.br|eng\.br|esp\.br|etc\.br|eti\.br|fm\.br|fot\.br|fst\.br|g12\.br|gov\.br|ind\.br|inf\.br|jor\.br|lel\.br|med\.br|mil\.br|net\.br|nom\.br|ntr\.br|odo\.br|org\.br|ppg\.br|pro\.br|psc\.br|psi\.br|rec\.br|slg\.br|tmp\.br|tur\.br|tv\.br|vet\.br|zlg\.br|br|ab\.ca|bc\.ca|mb\.ca|nb\.ca|nf\.ca|ns\.ca|nt\.ca|on\.ca|pe\.ca|qc\.ca|sk\.ca|yk\.ca|ca|cc|ac\.cn|com\.cn|edu\.cn|gov\.cn|org\.cn|bj\.cn|sh\.cn|tj\.cn|cq\.cn|he\.cn|nm\.cn|ln\.cn|jl\.cn|hl\.cn|js\.cn|zj\.cn|ah\.cn|gd\.cn|gx\.cn|hi\.cn|sc\.cn|gz\.cn|yn\.cn|xz\.cn|sn\.cn|gs\.cn|qh\.cn|nx\.cn|xj\.cn|tw\.cn|hk\.cn|mo\.cn|cn|cx|cz|de|dk|fo|com\.ec|tm\.fr|com\.fr|asso\.fr|presse\.fr|fr|gf|gs|co\.il|net\.il|ac\.il|k12\.il|gov\.il|muni\.il|ac\.in|co\.in|org\.in|ernet\.in|gov\.in|net\.in|res\.in|is|it|ac\.jp|co\.jp|go\.jp|or\.jp|ne\.jp|ac\.kr|co\.kr|go\.kr|ne\.kr|nm\.kr|or\.kr|li|lt|lu|asso\.mc|tm\.mc|com\.mm|org\.mm|net\.mm|edu\.mm|gov\.mm|ms|nl|no|nu|pl|ro|org\.ro|store\.ro|tm\.ro|firm\.ro|www\.ro|arts\.ro|rec\.ro|info\.ro|nom\.ro|nt\.ro|se|si|com\.sg|org\.sg|net\.sg|gov\.sg|sk|st|tf|ac\.th|co\.th|go\.th|mi\.th|net\.th|or\.th|tm|to|com\.tr|edu\.tr|gov\.tr|k12\.tr|net\.tr|org\.tr|com\.tw|org\.tw|net\.tw|ac\.uk|uk\.com|uk\.net|gb\.com|gb\.net|vg|sh|kz|ch|info|ua|gov|name|pro|ie|hk|com\.hk|org\.hk|net\.hk|edu\.hk|us|tk|cd|by|ad|lv|eu\.lv|bz|es|jp|cl|ag|mobi|eu|co\.nz|org\.nz|net\.nz|maori\.nz|iwi\.nz|io|la|md|sc|sg|vc|tw|travel|my|se|tv|pt|com\.pt|edu\.pt|asia|fi|com\.ve|net\.ve|fi|org\.ve|web\.ve|info\.ve|co\.ve|tel|im|gr|ru|net\.ru|org\.ru|hr|com\.hr|ly|xyz)$/);t.url=function(t){var n,i={};return t?((n=t.match(/^mailto:([^\/].+)/))?(i.protocol="mailto",i.email=n[1]):((n=t.match(/(.*?)\/#\!(.*)/))&&(t=n[1]+n[2]),(n=t.match(/(.*?)#(.*)/))&&(i.hash=n[2],t=n[1]),(n=t.match(/(.*?)\?(.*)/))&&(i.query=n[2],t=n[1]),(n=t.match(/(.*?)\:?\/\/(.*)/))&&(i.protocol=n[1].toLowerCase(),t=n[2]),(n=t.match(/(.*?)(\/.*)/))&&(i.path=n[2],t=n[1]),i.path=(i.path||"").replace(/^([^\/])/,"/$1"),(n=t.match(/(.*)\:([0-9]+)$/))&&(i.port=n[2],t=n[1]),(n=t.match(/(.*?)@(.*)/))&&(i.auth=n[1],t=n[2]),i.auth&&(n=i.auth.match(/(.*)\:(.*)/),i.user=n?n[1]:i.auth,i.pass=n?n[2]:void 0),i.hostname=t.toLowerCase(),(n=i.hostname.match(e))&&(i.tld=n[3],i.domain=n[2]?n[2]+"."+n[3]:void 0,i.sub=n[1]||void 0),i.domainhost=i.domain||i.hostname),i):i}}(Yt||(Yt={}));const Zt=Date.now();function Ht(){const t=Date.now(),e=Ht.last||t;return Ht.last=t>e?t:e+1}function Jt(t){let e=Ht();return t&&(e-=Zt),e.toString(36)}var Kt;function Qt(t){const e=t&&t.forms&&t.forms.length?t.forms.map(((t,e)=>{const n=l(t)||[],i=(t.fields||[]).map(((t,e)=>({mani:t,ftyp:c(t),life:s.valueLife4Mani(t),path:a.fieldPathItems(n,t.path_ext||""),pidx:e,ridx:0}))),o=function(t){let e=t?Yt.url(t):{};return e.domain||e.hostname||e.path||""}((r=t.detection?.web_ourl,(r||"").split("?")[0].split("#")[0]));var r;const u=(t=>!!t.length&&t.some((({path:t})=>t.sn)))(i),d=(t=>!!t.detection?.names_ext?.match(/Internet Explorer_Server/))(t)||(t=>!!t.detection?.processname?.match(/(iexplore|msedge|microsoftedgecp)\.exe"?$/i))(t),h={mani:t,type:e,disp:{domain:o,isScript:u,noFields:!i.length,isIe:d},pool:n,view:a.loc.utils.buildPreviewData(i),fields:i,rother:[]},p=Kt.getBailouts(h);return p&&(h.disp.bailOut=p),h})):[];return[0,1].forEach((t=>{e[t]&&(e[t].rother=e[0===t?1:0]?.fields.map((t=>t.ridx))||[])})),e}function te(t){const e=t?.map(((t,e)=>{const n=Jt.asRelativeNumber();return{...t,index:e,uuid:n,mru:n}}))||[];return{items:e}}function ee(t){return te(t?.names)}Jt.asNumber=function(){return Ht()},Jt.asRelativeNumber=function(){return Ht()-Zt},function(t){t.getBailouts=function(t){const e=[];return t.disp.isIe&&!t.disp.domain&&e.push("IE website form without site domain"),t.disp.isIe&&t.disp.isScript&&e.push("Manual mode manifest built for IE"),function(t){return!!t.disp.domain&&!t.disp.isScript&&!!t.fields.find((t=>t.mani.useit&&!t.path.sid&&"button"!==t.mani.type))}(t)&&e.push("There are fields in the form without an ID. Check path that does not have SID."),e.length?e:void 0}}(Kt||(Kt={}));export{a as FieldPath,i as FieldTyp,n as LIST_references,e as LIST_valueAskNames,t as Mani,St as Matching,r as TimeUtils,o as TransformEncoding,s as TransformValue,It as beautifyXMLCatalog,Ot as beautifyXMLManifest,ee as buildCatalogMeta,te as buildCatalogMetaFromNames,Qt as buildManiMetaForms,c as fieldTyp4Str,l as getPool,u as getPoolName,qt as makeXML,jt as parseOptionsRead,Ut as parseOptionsWrite,Dt as parseXMLFile,_t as showError};
//# sourceMappingURL=index.es.min.js.map
